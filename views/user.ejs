<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My To Do List</title>
    <link rel="stylesheet" href="/style-user.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>
<body>
    <div class="major-div">
        <div>
            <h1>Welcome <%= user.name %> </h1>
            <% if(todo.length == 0){ %>
                <h3>You do not have any task listed. Create one now and start managing your tasks </h3>
            <% }else{ %>
                <h3>Your To Do List :</h3>
            <% } %>
            
        </div>
        <div>
            <table >
                <tr  class="table-primary">
                    <th id="no">No.</th>
                    <th id="task">Task</th>
                    <th id="deadline">Deadline</th>
                    <th  id="action">Action</th>
                </tr>
                
                <% for(let i=0; i<todo.length; i++){ %>
                    <tr class="table-secondary">
                        <th class="font-change table-secondary"><%= i+1 %></th>
                        <th class="font-change table-secondary"><%= todo[i].task %></th>
                        <th class="font-change table-secondary"><%= todo[i].deadline %></th>
                        <th class="font-change table-secondary">
                            <form action="/<%= user.email %>/edit/<%=todo[i]._id%>" method="GET" style="display: inline-block;">
                                <button class="font-change btn btn-primary" >
                                    <i class="fa-regular fa-pen-to-square"></i>
                                    Edit
                                </button>
                            </form>
                            
                            <form action="/<%= user.email %>/delete/<%=todo[i]._id%>?_method=DELETE" style="display: inline-block;" method="POST">
                                <button class="font-change btn btn-danger">
                                    <i class="fa-solid fa-trash"></i>
                                    Delete</button>

                            </form>
                            
                        </th>
                    </tr>
                <%} %>
            </table>
        </div>
        <button id="new-task-btn" class="btn btn-secondary mt-5 font-change" >Add New Task :</button>
        <div class="new-task-major">
            <div class="new-task">
                <form action="/new/<%= user.email %>" method="POST" id="form-new-task">
                    <p>Add new Task</p>
                    <label for="new-task" id="new-task-lbl">Task:</label><br>
                    <textarea name="new-task" id="new-task" cols="20" rows="3" style="background-color: rgba(119, 99, 99, 0.281);"></textarea><br>
                    <label for="new-deadline" id="new-deadline-lbl">Deadline:</label><br>
                    <input type="time" name="new-deadline" id="new-deadline" class="mb-3" style="background-color: rgba(119, 99, 99, 0.281);"><br>
                    <div>
                        <button id="add-task-btn " class="btn btn-primary">Add task :</button>
                    </div>
                </form>
            </div>
        </div>
        <form action="/logout" method="post"><button id="logout" class="btn btn-danger mt-5">Logout</button></form>
            
    </div>
    <script src="/user.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>   
</html>

<!-- height="24px" viewBox="0 -960 960 960" width="24px" -->